{"version":3,"sources":["webpack://common-utilities/webpack/bootstrap","webpack://common-utilities/./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getTypeString","obj","toString","clone","arg","JSON","parse","stringify","isDefined","copySpecifiedObjectProperties","propertyList","src","dst","arguments","length","undefined","forEach","getOwnProperties","getOwnPropertyNames","generateRange","start","end","result","push","generateFirstNNaturalNumbers","replicateString","str","reduce","accumulator","zeroPadNumber","minLength","slice","getDateTimeString","date","typeStringOfParam","Date","concat","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","insertNumberIntoArray","array","findIndex","splice","insertionSort","removeDuplicatesFromArray","x","y","includes","_toConsumableArray","safeJsonParse","dflt","e","uuid","Math","random","substring","substr","floor","factory_fnIsType","typeName","__webpack_exports__","isArray","isFunction","isRegularExpression","isArrayOfNumbers","sum","mean","median","histogram","getAllSubsets","areSetsEqual","every","element","sortedArray","sort","hist","keys","count","sortSubsets","fnSubsetComparator","getAllSubsetsHelper","subsetInProgress","pop","s1","s2","lengthDiff","elementDiff","isSubset","set1","set2","fnElementsAreEqual","element1","find","element2","a","b"],"mappings":"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","file":"common-utilities-webpack-production-commonjs2.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// @tom-weatherhead/common-utilities.js/src/main.js\n\n'use strict';\n\n// **** Type Utilities ****\n\nexport function getTypeString (obj) {\n\treturn Object.prototype.toString.call(obj);\n}\n\n// **** Object utilities ****\n\n/*\n// From A. Levy's answer at https://stackoverflow.com/questions/728360/how-do-i-correctly-clone-a-javascript-object\n\nWhen I had to implement general deep copying I ended up compromising by assuming that I would only need to copy\na plain Object, Array, Date, String, Number, or Boolean. The last 3 types are immutable, so I could perform a shallow copy\nand not worry about it changing. I further assumed that any elements contained in Object or Array would also be one of the 6 simple types\nin that list. This can be accomplished with code like the following:\n\nfunction clone(obj) {\n    var copy;\n\n    // Handle the 3 simple types, and null or undefined\n    if (null == obj || \"object\" != typeof obj) return obj;\n\n    // Handle Date\n    if (obj instanceof Date) {\n        copy = new Date();\n        copy.setTime(obj.getTime());\n        return copy;\n    }\n\n    // Handle Array\n    if (obj instanceof Array) {\n        copy = [];\n        for (var i = 0, len = obj.length; i < len; i++) {\n            copy[i] = clone(obj[i]);\n        }\n        return copy;\n    }\n\n    // Handle Object\n    if (obj instanceof Object) {\n        copy = {};\n        for (var attr in obj) {\n            if (obj.hasOwnProperty(attr)) copy[attr] = clone(obj[attr]);\n        }\n        return copy;\n    }\n\n    throw new Error(\"Unable to copy obj! Its type isn't supported.\");\n}\n\nThe above function will work adequately for the 6 simple types I mentioned, as long as the data in the objects and arrays form a tree structure.\nThat is, there isn't more than one reference to the same data in the object.\n*/\n\nexport function clone (arg) {\n\t// For an in-depth discussion of object copying, see https://scotch.io/bar-talk/copying-objects-in-javascript\n\n\t// **** Warning: JSON.parse(JSON.stringify(arg)) will fail for circular objects.\n\t// ? Do we need isCircular(obj) ?\n\treturn JSON.parse(JSON.stringify(arg));\n\n\t// From avoidwork/haro/src/utility.js :\n\t// return JSON.parse(JSON.stringify(arg, null, 0)); // TODO: What are the second and third parameters to stringify() ?\n}\n\nexport function isDefined (obj) {\n\treturn typeof obj !== 'undefined';\n}\n\nexport function copySpecifiedObjectProperties (propertyList, src, dst = {}) {\n\n\tpropertyList.forEach(property => {\n\n\t\t// if (typeof src[property] !== 'undefined') {\n\t\tif (isDefined(src[property])) {\n\t\t\tdst[property] = src[property];\n\t\t}\n\t});\n\n\treturn dst;\n}\n\nexport function getOwnProperties (obj = {}) {\n\t/*\n\t// Version 1\n\t// See https://stackoverflow.com/questions/208016/how-to-list-the-properties-of-a-javascript-object\n\tlet result = [];\n\n\tfor (var key in obj) {\n\t\tif (obj.hasOwnProperty(key)) {\n\t\t\tresult.push(key);\n\t\t}\n\t}\n\n\treturn result;\n\t*/\n\n\t// Version 2\n\t// See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames\n\treturn Object.getOwnPropertyNames(obj);\n}\n\n// **** Numeric utilities ****\n\nexport function generateRange (start, end) {\n\tlet result = [];\n\n\twhile (start <= end) {\n\t\tresult.push(start);\n\t\tstart++;\n\t}\n\n\treturn result;\n}\n\nexport function generateFirstNNaturalNumbers (n) {\n\treturn generateRange(1, n);\n}\n\nexport function replicateString (str, n) {\n\treturn generateFirstNNaturalNumbers(n)\n\t\t.reduce(\n\t\t\t// (accumulator, i) => accumulator + str,\n\t\t\taccumulator => accumulator + str,\n\t\t\t''\n\t\t);\n}\n\nexport function zeroPadNumber (n, minLength) {\n\treturn (replicateString('0', minLength) + n).slice(-minLength);\n}\n\n// **** Date Utilities ****\n\nexport function getDateTimeString (date) {\n\tconst typeStringOfParam = getTypeString(date);\n\n\t// console.log('getDateTimeString() : Type of date parameter is', typeStringOfParam);\n\n\tif (!date || typeStringOfParam !== '[object Date]') {\n\t\t// console.log('getDateTimeString() : Setting the parameter to the current date and time...');\n\t\tdate = new Date();\n\t}\n\n\t// See https://stackoverflow.com/questions/10073699/pad-a-number-with-leading-zeros-in-javascript\n\t// ('000' + num).slice(-4)\n\t// return `${date.getFullYear()}-${('0' + (date.getMonth() + 1)).slice(-2)}-${('0' + date.getDate()).slice(-2)} ${('0' + date.getHours()).slice(-2)}:${('0' + date.getMinutes()).slice(-2)}:${('0' + date.getSeconds()).slice(-2)}`;\n\treturn `${date.getFullYear()}-${zeroPadNumber(date.getMonth() + 1, 2)}-${zeroPadNumber(date.getDate(), 2)} ${zeroPadNumber(date.getHours(), 2)}:${zeroPadNumber(date.getMinutes(), 2)}:${zeroPadNumber(date.getSeconds(), 2)}`;\n}\n\n// **** Array Utilities ****\n\nexport function insertNumberIntoArray (n, array) {\n\t// array must already be sorted in non-descending order.\n\tlet i = array.findIndex(m => m >= n);\n\n\tif (i < 0) {\n\t\ti = array.length;\n\t}\n\n\tlet result = clone(array);\n\n\t// Array.splice modifies the array in place. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice\n\tresult.splice(i, 0, n);\n\n\treturn result;\n}\n\nexport function insertionSort (array) {\n\treturn array.reduce(\n\t\t(accumulator, n) => insertNumberIntoArray(n, accumulator),\n\t\t[]\n\t);\n}\n\nexport function removeDuplicatesFromArray (array) {\n\t// See the discussion at https://gist.github.com/telekosmos/3b62a31a5c43f40849bb\n\n\t// JavaScript Set: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\n\n\t// See https://stackoverflow.com/questions/13486479/how-to-get-an-array-of-unique-values-from-an-array-containing-duplicates-in-java\n\t// Discussion about performace: See https://medium.com/@jakubsynowiec/unique-array-values-in-javascript-7c932682766c\n\t// return [...new Set(array)]; // Yes. Requires ES6, since it uses the \"spread\" operator (\"...\").\n\n\t// return Array.from(new Set(array)); // Yes\n\n\t// array.includes() does not exist.\n\n\treturn array.reduce((x, y) => x.includes(y) ? x : [...x, y], []); // Yes. From svnpenn.\n}\n\nexport function safeJsonParse (str, dflt = undefined) {\n\ttry {\n\t\treturn JSON.parse(str);\n\t} catch (e) {\n\n\t\tif (!isDefined(dflt)) {\n\t\t\tthrow e;\n\t\t}\n\n\t\treturn dflt;\n\t}\n}\n\n// avoidwork/haro/src/utility.js\n/*\n\tfunction has (a, b) {\n\t\treturn b in a;\n\t}\n\n\tfunction each (arr, fn) {\n\t\tfor (const item of arr.entries()) {\n\t\t\tfn(item[1], item[0]);\n\t\t}\n\n\t\treturn arr;\n\t}\n\n\tfunction cast (input) {\n\t\tlet result;\n\n\t\tswitch (true) {\n\t\t\tcase input instanceof Map:\n\t\t\t\tresult = {};\n\t\t\t\tinput.forEach((value, key) => {\n\t\t\t\t\tresult[key] = cast(value);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase input instanceof Set:\n\t\t\t\tresult = Array.from(input);\n\t\t\t\tbreak;\n\t\t\tcase Array.isArray(input):\n\t\t\t\tresult = new Set(input);\n\t\t\t\tbreak;\n\t\t\tcase input instanceof Object:\n\t\t\t\tresult = new Map(Object.keys(input).map(i => [i, cast(input[i])]));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tresult = input;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfunction blob (arg) {\n\t\treturn new Blob([arg], {type: \"application/javascript\"});\n\t}\n\n\tfunction clone (arg) {\n\t\treturn JSON.parse(JSON.stringify(arg, null, 0));\n\t}\n\n\tfunction concatURI (left, right) {\n\t\treturn left.replace(regex.querystring, \"\").replace(regex.endslash, \"\") + (right ? \"/\" + right : \"\");\n\t}\n\n\tfunction keyIndex (key, data, delimiter, pattern) {\n\t\tlet result;\n\n\t\tif (key.indexOf(delimiter) > -1) {\n\t\t\tresult = key.split(delimiter).sort((a, b) => a.localeCompare(b)).map(i => data[i].toString().replace(new RegExp(pattern, \"g\"), \"\").toLowerCase()).join(delimiter);\n\t\t} else {\n\t\t\tresult = data[key];\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfunction delIndex (index, indexes, delimiter, key, data, pattern) {\n\t\tindex.forEach(i => {\n\t\t\tconst idx = indexes.get(i),\n\t\t\t\tvalue = keyIndex(i, data, delimiter, pattern);\n\n\t\t\tif (idx.has(value)) {\n\t\t\t\tconst o = idx.get(value);\n\n\t\t\t\to.delete(key);\n\n\t\t\t\tif (o.size === 0) {\n\t\t\t\t\tidx.delete(value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction createIndexes (records, indexes, key, delimiter, pattern) {\n\t\tconst result = {};\n\n\t\teach(indexes, i => {\n\t\t\tresult[i] = {};\n\t\t});\n\n\t\teach(records, i => {\n\t\t\tconst lkey = i[key];\n\n\t\t\tif (lkey !== void 0) {\n\t\t\t\tindexes.forEach(index => {\n\t\t\t\t\tconst lindex = keyIndex(index, i, delimiter, pattern);\n\n\t\t\t\t\tif (!has(result[index], lindex)) {\n\t\t\t\t\t\tresult[index][lindex] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tresult[index][lindex].push(lkey);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tfunction iterate (obj, fn) {\n\t\tif (obj instanceof Object) {\n\t\t\teach(Object.keys(obj), i => fn.call(obj, obj[i], i));\n\t\t} else {\n\t\t\teach(obj, fn);\n\t\t}\n\t}\n\n\tfunction merge (a, b) {\n\t\tif (a instanceof Object && b instanceof Object) {\n\t\t\teach(Object.keys(b), i => {\n\t\t\t\tif (a[i] instanceof Object && b[i] instanceof Object) {\n\t\t\t\t\ta[i] = merge(a[i], b[i]);\n\t\t\t\t} else if (Array.isArray(a[i]) && Array.isArray(b[i])) {\n\t\t\t\t\ta[i] = a[i].concat(b[i]);\n\t\t\t\t} else {\n\t\t\t\t\ta[i] = b[i];\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (Array.isArray(a) && Array.isArray(b)) {\n\t\t\ta = a.concat(b);\n\t\t} else {\n\t\t\ta = b;\n\t\t}\n\n\t\treturn a;\n\t}\n\n\tfunction joinData (id, a, b, key, on, type = \"inner\") {\n\t\tconst result = [];\n\t\tlet errorMsg = \"More than one record found on \";\n\n\t\tlet error = false;\n\n\t\tfunction join (left, right, ids, include = false, reverse = false) {\n\t\t\tconst keys = Object.keys(right[0]),\n\t\t\t\tfn = !reverse ? (x, i) => x[on] === i[key] : (x, i) => x[key] === i[on];\n\n\t\t\teach(left, i => {\n\t\t\t\tconst comp = {},\n\t\t\t\t\tc = right.filter(x => fn(x, i));\n\n\t\t\t\tlet valid = true;\n\n\t\t\t\tif (c.length > 1) {\n\t\t\t\t\terror = true;\n\t\t\t\t\terrorMsg += i[on];\n\t\t\t\t\tvalid = false;\n\t\t\t\t} else if (c.length === 1) {\n\t\t\t\t\teach([i, c[0]], (x, idx) => iterate(x, (v, k) => {\n\t\t\t\t\t\tcomp[ids[idx] + \"_\" + k] = v;\n\t\t\t\t\t}));\n\t\t\t\t} else if (include) {\n\t\t\t\t\titerate(i, (v, k) => {\n\t\t\t\t\t\tcomp[ids[0] + \"_\" + k] = v;\n\t\t\t\t\t});\n\n\t\t\t\t\teach(keys, k => {\n\t\t\t\t\t\tcomp[ids[1] + \"_\" + k] = null;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (valid && Object.keys(comp).length > 0) {\n\t\t\t\t\tresult.push(comp);\n\t\t\t\t}\n\n\t\t\t\treturn valid;\n\t\t\t}, true);\n\t\t}\n\n\t\tif (type === \"inner\") {\n\t\t\tjoin(a, b, id);\n\t\t}\n\n\t\tif (type === \"left\") {\n\t\t\tjoin(a, b, id, true);\n\t\t}\n\n\t\tif (type === \"right\") {\n\t\t\tjoin(b, a, clone(id).reverse(), true, true);\n\t\t}\n\n\t\treturn !error ? result : errorMsg;\n\t}\n\n\tfunction onmessage (ev) {\n\t\tconst data = JSON.parse(ev.data),\n\t\t\tcmd = data.cmd;\n\n\t\tlet result;\n\n\t\tif (cmd === \"index\") {\n\t\t\tresult = createIndexes(data.records, data.index, data.key, data.delimiter, data.pattern);\n\t\t}\n\n\t\tif (cmd === \"join\") {\n\t\t\tresult = joinData(data.ids, data.records[0], data.records[1], data.key, data.on, data.type);\n\t\t}\n\n\t\tpostMessage(JSON.stringify(result));\n\t}\n\n\tfunction createPatch (ogdata = {}, data = {}, key = \"\", overwrite = false) {\n\t\tconst result = [];\n\n\t\tif (overwrite) {\n\t\t\titerate(ogdata, (v, k) => {\n\t\t\t\tif (k !== key && data[k] === void 0) {\n\t\t\t\t\tresult.push({op: \"remove\", path: \"/\" + k});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\titerate(data, (v, k) => {\n\t\t\tif (k !== key && ogdata[k] === void 0) {\n\t\t\t\tresult.push({op: \"add\", path: \"/\" + k, value: v});\n\t\t\t} else if (JSON.stringify(ogdata[k]) !== JSON.stringify(v)) {\n\t\t\t\tresult.push({op: \"replace\", path: \"/\" + k, value: v});\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tfunction s () {\n\t\treturn ((Math.random() + 1) * 0x10000 | 0).toString(16).substring(1);\n\t}\n\n\tfunction setIndex (index, indexes, delimiter, key, data, indice, pattern) {\n\t\teach(!indice ? index : [indice], i => {\n\t\t\tconst lidx = keyIndex(i, data, delimiter, pattern);\n\t\t\tlet lindex;\n\n\t\t\tif (lidx !== void 0 && lidx !== null) {\n\t\t\t\tlindex = indexes.get(i);\n\n\t\t\t\tif (!lindex.has(lidx)) {\n\t\t\t\t\tlindex.set(lidx, new Set());\n\t\t\t\t}\n\n\t\t\t\tlindex.get(lidx).add(key);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction toObjekt (arg, frozen = true) {\n\t\tconst result = {};\n\n\t\targ.forEach((value, key) => {\n\t\t\tconst obj = value;\n\n\t\t\tif (frozen) {\n\t\t\t\tObject.freeze(obj);\n\t\t\t}\n\n\t\t\tresult[clone(key)] = obj;\n\t\t});\n\n\t\tif (frozen) {\n\t\t\tObject.freeze(result);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tfunction uuid () {\n\t\treturn s() + s() + \"-\" + s() + \"-4\" + s().substr(0, 3) + \"-\" + r[Math.floor(Math.random() * 4)] + s().substr(0, 3) + \"-\" + s() + s() + s();\n\t}\n\n\tconst functions = [\n\t\tcast.toString(),\n\t\tclone.toString(),\n\t\tcreateIndexes.toString(),\n\t\teach.toString(),\n\t\thas.toString(),\n\t\titerate.toString(),\n\t\tjoinData.toString(),\n\t\tkeyIndex.toString(),\n\t\tsetIndex.toString(),\n\t\t(node === false ? \"\" : \"self.\") + \"onmessage = \" + onmessage.toString() + \";\"\n\t].join(\"\\n\");\n*/\n\n// uuid() :\n// See https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n// See https://developer.mozilla.org/en-US/docs/Web/API/Crypto\n\n// **** BEGIN : From avoidwork/haro ****\n\n/*\nfunction s () {\n\treturn ((Math.random() + 1) * 0x10000 | 0).toString(16).substring(1);\n}\n*/\n\nexport function uuid () {\n\t// From avoidwork/haro. Thank you, Jason Mulligan.\n\tconst r = [8, 9, 'a', 'b'];\n\tconst s = () => ((Math.random() + 1) * 0x10000 | 0).toString(16).substring(1);\n\n\treturn s() + s() + '-' + s() + '-4' + s().substr(0, 3) + '-' +\n\t\tr[Math.floor(Math.random() * 4)] + s().substr(0, 3) + '-' +\n\t\ts() + s() + s();\n}\n\n// **** END : From avoidwork/haro ****\n\n// TODO: common-utilities: Create mean(), median(), mode(), histogram()\n\n/*\nexport function isArray (arg) {\n\treturn getTypeString(arg) === '[object Array]';\n}\n*/\n\nfunction factory_fnIsType (typeName) {\n\treturn arg => getTypeString(arg) === `[object ${typeName}]`;\n}\n\n// TODO: npm i -D @babel/preset-env\n// TODO: Babel presets in Gruntfile: \"presets\": [ \"@babel/preset-env\" ]\n// See https://github.com/babel/babel/issues/8575\n// See https://github.com/storybooks/storybook/issues/3937\n// See https://stackoverflow.com/questions/52092739/upgrade-to-babel-7-cannot-read-property-bindings-of-null\nexport const isArray = factory_fnIsType('Array');\n\n/*\nexport function isFunction (arg) {\n\treturn getTypeString(arg) === '[object Function]';\n}\n*/\nexport const isFunction = factory_fnIsType('Function');\n\nexport const isRegularExpression = factory_fnIsType('RegExp');\n\nexport function isArrayOfNumbers (arg) {\n\treturn isArray(arg) &&\n\t\targ.every(element => getTypeString(element) === '[object Number]');\n}\n\nexport function sum (arg) {\n\n\tif (!isArrayOfNumbers(arg)) {\n\t\treturn undefined;\n\t}\n\n\treturn arg.reduce(\n\t\t(accumulator, n) => accumulator + n,\n\t\t0\n\t);\n}\n\nexport function mean (arg) {\n\n\tif (!isArrayOfNumbers(arg) || arg.length <= 0) {\n\t\treturn undefined;\n\t}\n\n\treturn sum(arg) / arg.length;\n}\n\nexport function median (arg) {\n\t// console.log('median: arg is', arg);\n\t// console.log('median: getTypeString(arg) is', getTypeString(arg));\n\n\tif (!isArrayOfNumbers(arg) || arg.length <= 0) {\n\t\treturn undefined;\n\t}\n\n\tconst sortedArray = clone(arg).sort(); // Array.sort() sorts the array *in place*\n\n\t// console.log('median: sortedArray is', sortedArray);\n\t// console.log('median: sortedArray.length is', sortedArray.length);\n\n\treturn sortedArray[Math.floor(sortedArray.length / 2)];\n}\n\nexport function histogram (arg) {\n\n\tif (!isArray(arg)) {\n\t\treturn undefined;\n\t}\n\n\tlet result = {};\n\n\targ.forEach(element => {\n\t\tresult[element] = (result[element] || 0) + 1;\n\t});\n\n\treturn result;\n\n\t/* Or:\n\treturn arg.reduce(\n\t\t(accumulator, element) => {\n\t\t\taccumulator[element] = (accumulator[element] || 0) + 1;\n\n\t\t\treturn accumulator;\n\t\t},\n\t\t{}\n\t);\n\t*/\n}\n\nexport function mode (arg) {\n\tconst hist = histogram(arg);\n\n\treturn Object.keys(hist).reduce(\n\t\t(accumulator, element) => {\n\t\t\t// console.log('mode: accumulator is', accumulator);\n\t\t\t// console.log('mode: element is', element);\n\t\t\t// console.log('mode: hist[element] is', hist[element]);\n\n\t\t\tif (hist[element] > accumulator.count) {\n\t\t\t\taccumulator = { element: element, count: hist[element] };\n\t\t\t\t// console.log('**** mode: accumulator is now', accumulator);\n\t\t\t}\n\n\t\t\treturn accumulator;\n\t\t},\n\t\t{ element: undefined, count: 0 }\n\t);\n}\n\nfunction getAllSubsetsHelper (result, arg, i, subsetInProgress) {\n\n\tif (i >= arg.length) {\n\t\tresult.push(clone(subsetInProgress));\n\t} else {\n\t\tgetAllSubsetsHelper(result, arg, i + 1, subsetInProgress);\n\t\tsubsetInProgress.push(arg[i]);\n\t\tgetAllSubsetsHelper(result, arg, i + 1, subsetInProgress);\n\t\tsubsetInProgress.pop();\n\t}\n}\n\nexport function getAllSubsets (arg, sortSubsets, fnSubsetComparator) {\n\tlet result = [];\n\n\tgetAllSubsetsHelper(result, arg, 0, []);\n\n\t// console.log('getAllSubsets() : arg is', arg, '; result is', result);\n\n\tif (sortSubsets) {\n\t\tconst fnDefaultSubsetComparator = (s1, s2) => {\n\t\t\tconst lengthDiff = s1.length - s2.length;\n\n\t\t\tif (lengthDiff) {\n\t\t\t\treturn lengthDiff;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < s1.length; ++i) {\n\t\t\t\tconst elementDiff = s1[i] - s2[i];\n\n\t\t\t\tif (elementDiff) {\n\t\t\t\t\treturn elementDiff;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t};\n\n\t\tresult.sort(fnSubsetComparator || fnDefaultSubsetComparator);\n\t}\n\n\treturn result;\n}\n\nfunction isSubset (set1, set2, fnElementsAreEqual) {\n\treturn set1.every(element1 => isDefined(set2.find(element2 => fnElementsAreEqual(element1, element2))));\n}\n\nexport function areSetsEqual (set1, set2, fnElementsAreEqual) {\n\n\tif (!isFunction(fnElementsAreEqual)) {\n\t\tfnElementsAreEqual = (a, b) => a === b;\n\t}\n\n\treturn isArray(set1) && isArray(set2) && isSubset(set1, set2, fnElementsAreEqual) && isSubset(set2, set1, fnElementsAreEqual);\n}\n\n// return () => 'Hello world!';\n"],"sourceRoot":""}